<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>Image Resizer & Compressor - Resize & Compress Images Online</title>
    <meta name="description" content="A free online tool to resize and compress your images (JPG, PNG, WEBP). Reduce image file size without losing quality. Resize by percentage or pixels. Fast, secure, and no registration required.">
    <meta name="keywords" content="image resizer, image compressor, resize image online, compress image free, reduce image size, jpg compressor, png resizer, image optimizer">
    <meta name="author" content="Switchere Club">
    <link rel="canonical" href="https://www.switchere.online/">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Image Resizer & Compressor - Resize & Compress Images Online">
    <meta property="og:description" content="The easiest way to resize and compress your images online. Perfect for web, social media, and email. Instant downloads, completely free.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.switchere.online/">
    <meta property="og:image" content="https://www.switchere.online/og-image.jpg">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free Online Image Resizer & Compressor">
    <meta name="twitter:description" content="Resize and shrink your JPG, PNG, and WEBP images with our easy-to-use online tool. No software needed.">

    <!-- Favicon (Inline SVG) -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z' fill='%230066CC'/%3E%3C/svg%3E">

    <!-- Google Fonts - Optimized -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Schema.org Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Image Resizer & Compressor",
        "description": "A free online tool to resize images by percentage or pixels and compress them to reduce file size.",
        "url": "https://www.switchere.online/",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "reviewCount": "11254"
        }
    }
    </script>

    <!-- Compact Optimized Styles -->
    <style>
        :root {
            --primary: #0066CC; --primary-light: #E6F2FF; --primary-dark: #004C99; --accent: #00CC88; --accent-light: #E6FFF9;
            --text-dark: #1A1A1A; --text-gray: #4A5568; --text-light: #718096; --border: #E2E8F0; --bg-white: #FFFFFF; --bg-light: #F7FAFC;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background: linear-gradient(to bottom, var(--bg-light) 0%, white 50%, var(--bg-light) 100%); color: var(--text-dark); line-height: 1.65; font-size: 16px; -webkit-font-smoothing: antialiased; }
        header { background: var(--bg-white); border-bottom: 1px solid var(--border); box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .logo { color: var(--primary); font-weight: 700; font-size: 1.125rem; letter-spacing: -0.02em; }
        nav a { color: var(--text-gray); text-decoration: none; font-size: 0.9375rem; transition: color 0.2s; font-weight: 500; }
        nav a:hover { color: var(--primary); }
        nav a.nav-btn { background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 0.5rem 1.25rem; border-radius: 6px; font-weight: 600; transition: all 0.3s; box-shadow: 0 2px 8px rgba(0,102,204,0.2); }
        nav a.nav-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,102,204,0.3); }
        .hero { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); padding: 4rem 1rem; }
        .hero h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; color: white; letter-spacing: -0.03em; line-height: 1.2; }
        .hero p { color: rgba(255,255,255,0.95); font-size: 1.125rem; line-height: 1.6; max-width: 650px; margin: 0 auto; }
        .card { background: var(--bg-white); border-radius: 12px; padding: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border: 1px solid var(--border); }
        .btn { padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; font-size: 1rem; }
        .btn-primary { background: var(--accent); color: white; box-shadow: 0 2px 8px rgba(0, 204, 136, 0.25); }
        .btn-primary:hover:not(:disabled) { background: #00b377; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0, 204, 136, 0.35); }
        .btn-primary:disabled { background-color: var(--text-light); cursor: not-allowed; box-shadow: none; opacity: 0.7; }
        #upload-area { border: 3px dashed var(--border); border-radius: 12px; padding: 2.5rem; text-align: center; cursor: pointer; transition: all 0.3s ease; background: var(--bg-light); }
        #upload-area.drag-over { border-color: var(--primary); background: var(--primary-light); }
        #image-workspace { display: none; grid-template-columns: 1fr; gap: 2rem; margin-top: 1.5rem; }
        #image-workspace.visible { display: grid; animation: fadeIn 0.5s ease-out; }
        @media (min-width: 768px) { #image-workspace { grid-template-columns: 1fr 1fr; } }
        #preview-container { background: var(--bg-light); border-radius: 8px; padding: 1rem; display: flex; align-items: center; justify-content: center; min-height: 300px; }
        #image-preview { max-width: 100%; max-height: 300px; object-fit: contain; border-radius: 4px; transition: opacity 0.3s; }
        #image-preview.updating { opacity: 0.7; }
        .input-label { display: block; font-size: 0.875rem; font-weight: 500; color: var(--text-gray); margin-bottom: 0.5rem; }
        .input-field { width: 100%; padding: 0.75rem 1rem; border: 2px solid var(--border); border-radius: 8px; font-size: 1rem; transition: all 0.2s; background: var(--bg-white); }
        .input-field:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-light); }
        .input-row { display: flex; align-items: center; gap: 0.75rem; }
        #lock-aspect-ratio { background: none; border: 2px solid var(--border); border-radius: 8px; padding: 0.5rem; cursor: pointer; color: var(--text-gray); transition: all 0.2s; }
        #lock-aspect-ratio:hover { border-color: var(--primary); }
        #lock-aspect-ratio.locked { color: var(--accent); border-color: var(--accent); background-color: var(--accent-light); }
        .slider-container { margin-top: 1rem; }
        input[type="range"] { -webkit-appearance: none; width: 100%; height: 8px; background: var(--border); border-radius: 8px; outline: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; background: var(--primary); border-radius: 50%; cursor: pointer; transition: transform 0.2s; }
        input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.1); }
        .size-comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1.5rem; text-align: center; }
        .size-box { background: var(--bg-light); padding: 1rem; border-radius: 8px; }
        .size-box .label { font-size: 0.9rem; color: var(--text-gray); }
        .size-box .value { font-size: 1.25rem; font-weight: 600; color: var(--text-dark); }
        .size-box .value.updated { animation: highlight 0.7s ease; }
        @keyframes highlight { 0% { color: var(--accent); transform: scale(1); } 50% { transform: scale(1.1); } 100% { color: var(--text-dark); transform: scale(1); } }
        .faq-item { border-bottom: 1px solid var(--border); padding: 1rem 0; }
        .faq-question { display: flex; justify-content: space-between; align-items: center; font-weight: 600; color: var(--text-dark); cursor: pointer; }
        .faq-answer { max-height: 0; overflow: hidden; transition: all 0.3s ease; color: var(--text-gray); }
        .faq-answer p { margin-top: 0.75rem; }
        .faq-answer.active { max-height: 500px; }
        .faq-icon { transition: transform 0.3s; color: var(--primary); }
        .faq-icon.active { transform: rotate(180deg); }
        section { padding: 4rem 1rem; }
        .section-title { font-size: 2rem; font-weight: 700; text-align: center; margin-bottom: 1rem; color: var(--text-dark); letter-spacing: -0.02em; line-height: 1.3; }
        .section-desc { text-align: center; color: var(--text-gray); margin-bottom: 2.5rem; max-width: 650px; margin-left: auto; margin-right: auto; font-size: 1.0625rem; line-height: 1.6; }
        footer { background: var(--text-dark); color: rgba(255,255,255,0.8); padding: 2rem 1rem; font-size: 0.85rem; }
        footer a { color: rgba(255,255,255,0.8); text-decoration: none; transition: color 0.2s; }
        footer a:hover { color: var(--primary); }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
        .text-center { text-align: center; }
        @media (max-width: 767px) {
            .hero { padding: 3rem 1rem; } .hero h1 { font-size: 2rem; } .hero p { font-size: 1rem; }
            section { padding: 3rem 1rem; } .section-title { font-size: 1.75rem; } .section-desc { font-size: 1rem; }
            nav { display: none; }
        }
        @media (min-width: 768px) { .hero h1 { font-size: 2.75rem; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate { animation: fadeIn 0.5s ease-out forwards; }
    </style>
</head>
<body>

<header style="position: sticky; top: 0; z-index: 50;">
    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.875rem 0;">
            <a href="/" style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none;">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" style="color: var(--primary);">
                    <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" fill="currentColor"/>
                </svg>
                <span class="logo">Image Resizer</span>
            </a>
            <nav style="display: flex; gap: 1.25rem; align-items: center;">
                <a href="#tool">Resizer</a>
                <a href="#content">Why Resize?</a>
                <a href="#faq">FAQ</a>
                <a href="https://www.switchere.online/tools" class="nav-btn" target="_blank">All Tools</a>
            </nav>
        </div>
    </div>
</header>

<main>
    <section class="hero text-center">
        <h1>Image Resizer & Compressor</h1>
        <p>Resize, compress, and optimize your images online for free. Perfect for web, social media, and email attachments.</p>
    </section>

    <section id="tool" style="background: linear-gradient(135deg, white 0%, var(--bg-light) 100%); position: relative; overflow: hidden; padding-top: 2rem; padding-bottom: 2rem;">
        <div class="container" style="max-width: 950px; position: relative; z-index: 1;">
            <div class="card animate" style="border: 1px solid var(--border); box-shadow: 0 8px 24px rgba(0,0,0,0.08); position: relative; overflow: hidden;">
                <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, var(--primary), var(--accent));"></div>
                
                <input type="file" id="image-input" accept="image/*" style="display: none;">
                <div id="upload-area">
                    <svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" style="color: var(--primary); margin: 0 auto 1rem;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M3.75 18A5.25 5.25 0 009 20.25h6A5.25 5.25 0 0020.25 15m-16.5 0A5.25 5.25 0 019 9.75h.75c.414 0 .82.124 1.173.354A4.002 4.002 0 0115.75 6h.75a4.5 4.5 0 014.5 4.5v.75m-18 3.75a2.25 2.25 0 002.25 2.25h13.5a2.25 2.25 0 002.25-2.25m-18 0V15c0-1.243.394-2.38.995-3.324"/></svg>
                    <p style="color: var(--text-gray); font-weight: 500; font-size: 1.125rem;">Drag & drop your image here, or <span style="color: var(--primary); font-weight: 600; text-decoration: underline;">browse file</span></p>
                    <p style="font-size: 0.875rem; color: var(--text-light); margin-top: 0.5rem;">Supports JPG, PNG, WEBP</p>
                </div>

                <div id="image-workspace">
                    <div id="preview-container">
                        <img id="image-preview" src="#" alt="Image Preview" style="opacity:0;">
                    </div>
                    <div id="controls">
                        <div style="margin-bottom: 1.5rem;">
                            <label class="input-label" for="resize-percent">Resize by Percentage</label>
                            <div class="input-row">
                                <input type="range" id="resize-percent" min="1" max="100" value="100" style="flex-grow: 1;">
                                <input type="number" id="resize-percent-value" min="1" max="200" value="100" class="input-field" style="max-width: 80px;">
                            </div>
                        </div>
                        <div style="margin-bottom: 1.5rem;">
                             <label class="input-label">Resize by Pixels</label>
                             <div class="input-row">
                                 <input type="number" id="resize-width" class="input-field" placeholder="Width">
                                 <button id="lock-aspect-ratio" class="locked">
                                     <svg id="lock-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                                 </button>
                                 <input type="number" id="resize-height" class="input-field" placeholder="Height">
                             </div>
                        </div>
                        <div class="slider-container">
                             <label class="input-label" for="quality-slider">Compression Quality (<span id="quality-value">90</span>%)</label>
                             <input type="range" id="quality-slider" min="10" max="100" value="90">
                        </div>
                        <div class="size-comparison">
                            <div class="size-box">
                                <div class="label">Original</div>
                                <div id="original-size" class="value">-</div>
                            </div>
                            <div class="size-box">
                                <div class="label">New Size</div>
                                <div id="new-size" class="value">-</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                            <a href="#" id="download-btn" class="btn btn-primary" style="flex-grow: 1; text-decoration: none; text-align: center;">Download Image</a>
                            <button id="reset-btn" class="btn" style="background: #FEE; color: #C53030; border: 2px solid #FBC;">Reset</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section id="content" style="background: linear-gradient(135deg, var(--bg-light) 0%, white 100%);">
        <div class="container" style="max-width: 850px;">
            <h2 class="section-title">Why Resize & Compress Images?</h2>
            <p class="section-desc">Optimizing your images is crucial for web performance, faster uploads, and better user experience.</p>
            <div class="card" style="font-size: 1.05rem; line-height: 1.8; color: var(--text-gray);">
                <h3 style="color: var(--text-dark); margin-bottom: 1rem;">Faster Websites</h3>
                <p style="margin-bottom: 1.5rem;">Large images slow down your website, leading to poor user experience and lower search engine rankings. By resizing and compressing your images, you can significantly improve your page load speed, keeping visitors happy and engaged.</p>
                <h3 style="color: var(--text-dark); margin-bottom: 1rem;">Saving Storage & Bandwidth</h3>
                <p style="margin-bottom: 1.5rem;">Smaller images take up less storage space on your server and consume less bandwidth. This is essential for websites with a lot of images and can lead to cost savings on hosting.</p>
                 <h3 style="color: var(--text-dark); margin-bottom: 1rem;">Quick Social Media & Email Uploads</h3>
                <p>Social media platforms and email clients often have size limits for uploads. Compressing your images ensures they meet these requirements, allowing for quick and hassle-free sharing without errors.</p>
            </div>
        </div>
    </section>

    <section id="faq" style="background: linear-gradient(135deg, white 0%, var(--bg-light) 100%);">
        <div class="container" style="max-width: 800px;">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <p class="section-desc">Common questions about resizing and compressing images.</p>
            <div class="card" style="border: 1px solid var(--border); box-shadow: 0 4px 16px rgba(0,0,0,0.06);">
                <div class="faq-item"><div class="faq-question"><span>How do I resize an image without losing quality?</span><svg class="faq-icon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-linecap="round"/></svg></div><div class="faq-answer"><p>When making an image smaller, some quality loss is inevitable, but our tool minimizes it. To get the best results, start with a high-resolution image and keep the compression quality slider above 80%. Avoid making very small images larger, as this will result in pixelation.</p></div></div>
                <div class="faq-item"><div class="faq-question"><span>What is the best free image compressor?</span><svg class="faq-icon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-linecap="round"/></svg></div><div class="faq-answer"><p>The best tools are those that are fast, secure, and offer a good balance between file size and quality. Our tool is a great choice because it works entirely in your browser (your images are never uploaded), gives you full control over the compression level, and provides a live preview of the results.</p></div></div>
                <div class="faq-item"><div class="faq-question"><span>Is it safe to use an online image resizer?</span><svg class="faq-icon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M19 9l-7 7-7-7" stroke-linecap="round"/></svg></div><div class="faq-answer"><p>Yes, our tool is 100% secure. Since all the resizing and compression happens on your own computer within your browser, your images are never sent to our servers. Your privacy is guaranteed.</p></div></div>
            </div>
        </div>
    </section>
</main>

<footer>
    <div class="container text-center">
        <p>&copy; <span id="year"></span> Switchere Club. All Rights Reserved. | <a href="/privacy-policy.html">Privacy Policy</a></p>
    </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const UIElements = {
        uploadArea: document.getElementById('upload-area'),
        imageInput: document.getElementById('image-input'),
        imageWorkspace: document.getElementById('image-workspace'),
        imagePreview: document.getElementById('image-preview'),
        resizePercent: document.getElementById('resize-percent'),
        resizePercentValue: document.getElementById('resize-percent-value'),
        resizeWidth: document.getElementById('resize-width'),
        resizeHeight: document.getElementById('resize-height'),
        lockAspectRatioBtn: document.getElementById('lock-aspect-ratio'),
        lockIcon: document.getElementById('lock-icon'),
        qualitySlider: document.getElementById('quality-slider'),
        qualityValue: document.getElementById('quality-value'),
        originalSize: document.getElementById('original-size'),
        newSize: document.getElementById('new-size'),
        downloadBtn: document.getElementById('download-btn'),
        resetBtn: document.getElementById('reset-btn'),
        faqItems: document.querySelectorAll('.faq-item'),
        yearSpan: document.getElementById('year'),
    };

    let originalImage = null;
    let originalWidth = 0;
    let originalHeight = 0;
    let aspectRatio = 1;
    let isAspectRatioLocked = true;
    let debounceTimer;

    function handleFile(file) {
        if (!file || !file.type.startsWith('image/')) {
            alert('Please select a valid image file.');
            return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
            originalImage = new Image();
            originalImage.onload = () => {
                originalWidth = originalImage.width;
                originalHeight = originalImage.height;
                aspectRatio = originalWidth / originalHeight;

                UIElements.imagePreview.src = e.target.result;
                UIElements.imagePreview.style.opacity = 1;
                UIElements.originalSize.textContent = formatBytes(file.size);

                UIElements.uploadArea.style.display = 'none';
                UIElements.imageWorkspace.classList.add('visible');
                
                resetControls();
                updateImage();
            };
            originalImage.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
    
    function resetAll() {
        originalImage = null;
        UIElements.imageInput.value = ''; // This is crucial for re-uploading the same file
        UIElements.uploadArea.style.display = 'block';
        UIElements.imageWorkspace.classList.remove('visible');
        UIElements.imagePreview.src = '#';
        UIElements.imagePreview.style.opacity = 0;
    }

    function resetControls() {
        UIElements.resizePercent.value = 100;
        UIElements.resizePercentValue.value = 100;
        UIElements.qualitySlider.value = 90;
        UIElements.qualityValue.textContent = '90';
        UIElements.resizeWidth.value = originalWidth;
        UIElements.resizeHeight.value = originalHeight;
    }

    function updateImage() {
        if (!originalImage) return;

        UIElements.imagePreview.classList.add('updating');

        const newWidth = parseInt(UIElements.resizeWidth.value);
        const newHeight = parseInt(UIElements.resizeHeight.value);
        const quality = parseInt(UIElements.qualitySlider.value) / 100;

        const canvas = document.createElement('canvas');
        canvas.width = newWidth;
        canvas.height = newHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(originalImage, 0, 0, newWidth, newHeight);

        canvas.toBlob(blob => {
            if (blob) {
                UIElements.newSize.textContent = formatBytes(blob.size);
                UIElements.newSize.classList.add('updated');
                setTimeout(() => UIElements.newSize.classList.remove('updated'), 700);

                const url = URL.createObjectURL(blob);
                UIElements.downloadBtn.href = url;
                UIElements.downloadBtn.download = `resized-image.jpg`;
            }
             UIElements.imagePreview.classList.remove('updating');
        }, 'image/jpeg', quality);
    }
    
    function debounceUpdate() {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(updateImage, 250); // wait 250ms after user stops typing/sliding
    }
    
    function formatBytes(bytes, decimals = 2) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const dm = decimals < 0 ? 0 : decimals;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
    }

    // Event Listeners
    UIElements.uploadArea.addEventListener('click', () => UIElements.imageInput.click());
    UIElements.imageInput.addEventListener('change', (e) => handleFile(e.target.files[0]));

    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        UIElements.uploadArea.addEventListener(eventName, (e) => { e.preventDefault(); e.stopPropagation(); }, false);
    });
    ['dragenter', 'dragover'].forEach(eventName => {
        UIElements.uploadArea.addEventListener(eventName, () => UIElements.uploadArea.classList.add('drag-over'), false);
    });
    ['dragleave', 'drop'].forEach(eventName => {
        UIElements.uploadArea.addEventListener(eventName, () => UIElements.uploadArea.classList.remove('drag-over'), false);
    });
    UIElements.uploadArea.addEventListener('drop', (e) => handleFile(e.dataTransfer.files[0]));

    UIElements.resetBtn.addEventListener('click', resetAll);

    // Controls listeners
    UIElements.resizePercent.addEventListener('input', () => {
        const percent = parseInt(UIElements.resizePercent.value);
        UIElements.resizePercentValue.value = percent;
        UIElements.resizeWidth.value = Math.round(originalWidth * (percent / 100));
        UIElements.resizeHeight.value = Math.round(originalHeight * (percent / 100));
        debounceUpdate();
    });
     UIElements.resizePercentValue.addEventListener('input', () => {
        let percent = parseInt(UIElements.resizePercentValue.value);
        if (isNaN(percent) || percent < 1) percent = 1;
        if (percent > 500) percent = 500; // Cap at 500%
        UIElements.resizePercentValue.value = percent;
        UIElements.resizePercent.value = percent;
        UIElements.resizeWidth.value = Math.round(originalWidth * (percent / 100));
        UIElements.resizeHeight.value = Math.round(originalHeight * (percent / 100));
        debounceUpdate();
    });

    UIElements.resizeWidth.addEventListener('input', () => {
        if (isAspectRatioLocked) {
            const newWidth = parseInt(UIElements.resizeWidth.value);
            if (!isNaN(newWidth)) UIElements.resizeHeight.value = Math.round(newWidth / aspectRatio);
        }
        debounceUpdate();
    });
    UIElements.resizeHeight.addEventListener('input', () => {
        if (isAspectRatioLocked) {
            const newHeight = parseInt(UIElements.resizeHeight.value);
            if (!isNaN(newHeight)) UIElements.resizeWidth.value = Math.round(newHeight * aspectRatio);
        }
        debounceUpdate();
    });
    
    UIElements.lockAspectRatioBtn.addEventListener('click', () => {
        isAspectRatioLocked = !isAspectRatioLocked;
        UIElements.lockAspectRatioBtn.classList.toggle('locked', isAspectRatioLocked);
        UIElements.lockIcon.innerHTML = isAspectRatioLocked
            ? `<rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>`
            : `<rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/>`;
    });

    UIElements.qualitySlider.addEventListener('input', () => {
        UIElements.qualityValue.textContent = UIElements.qualitySlider.value;
        debounceUpdate();
    });

    // FAQ Logic
    UIElements.faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        question.addEventListener('click', () => {
            const answer = item.querySelector('.faq-answer');
            const icon = item.querySelector('.faq-icon');
            const isActive = answer.classList.contains('active');
            
            UIElements.faqItems.forEach(other => {
                other.querySelector('.faq-answer').classList.remove('active');
                other.querySelector('.faq-icon').classList.remove('active');
            });
            if (!isActive) {
                answer.classList.add('active');
                icon.classList.add('active');
            }
        });
    });
    
    if (UIElements.yearSpan) {
        UIElements.yearSpan.textContent = new Date().getFullYear();
    }
});
</script>

</body>
</html>

